{
 "accept_payment": 0,
 "allow_comments": 0,
 "allow_delete": 0,
 "allow_edit": 1,
 "allow_incomplete": 0,
 "allow_multiple": 1,
 "allow_print": 0,
 "amount": 0.0,
 "amount_based_on_field": 0,
 "apply_document_permissions": 1,
 "breadcrumbs": "[{\"title\": _(\"Outgoing Dispatches\"), \"route\": \"outgoings\"}]",
 "button_label": "Save",
 "client_script": "\nfrappe.ready(function () {\n\tfrappe.web_form.after_save = () => {\n\t\twindow.location.href = \"/outgoing\";\n\t  }\n\n\tfrappe.web_form.after_load = () => {\n\t\t$('input[data-fieldname=\"destination\"]').attr(\"id\", \"autocomplete\");\n\n\t\tinitMap();\n\t}\n})\nfunction initMap() {\n  \n  const myLatlng = { lat: 9.009720495837291, lng: 38.76146451857262 };\n  const map = new google.maps.Map(document.getElementById(\"map\"), {\n    zoom: 13,\n    mapTypeControl: false,\n    center: myLatlng,\n  });\n  document.getElementById(\"autocomplete\").addEventListener(\"click\",  Geocode(map));\n  ////Geo Coding \n\n  ////\n  const geocoder = new google.maps.Geocoder();\n  // Create the initial InfoWindow.\n  let infoWindow = new google.maps.InfoWindow({\n    content: \"Click the map to get Lat/Lng!\",\n    position: myLatlng,\n  });\n\n  infoWindow.open(map);\n  // Configure the click listener.\n  map.addListener(\"click\", (mapsMouseEvent) => {\n    // Close the current InfoWindow.\n    infoWindow.close();\n    // Create a new InfoWindow.\n    infoWindow = new google.maps.InfoWindow({\n      position: mapsMouseEvent.latLng,\n    });\n    infoWindow.setContent(\n      JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2)\n    );\n    //document.getElementById(\"lat\").value = mapMouseEvent.latLng.toJSON()\n    infoWindow.open(map);\n    const el = JSON.parse(JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2));\n    document.querySelector(\"input[data-fieldname='lat']\").value =el.lat;\n    document.querySelector(\"input[data-fieldname='long']\").value = el.lng;\n    geocodeLatLng(geocoder, map, infoWindow,el);\n \n  });\n    \n   \n}\nfunction geocodeLatLng(geocoder, map, infowindow,el) {\n  geocoder\n    .geocode({ location: el })\n    .then((response) => {\n \n      if (response.results[0]) {\n        const marker = new google.maps.Marker({\n          position: el,\n          map: map,\n        });\n        console.log(response.results[0].formatted_address)\n        document.querySelector(\"input[data-fieldname='permanent_address']\").value =response.results[0].formatted_address;\n        map.panTo(marker.position);\n        infowindow.setContent(response.results[0].formatted_address);\n        infowindow.open(map, marker);\n      } else {\n        window.alert(\"No results found\");\n      }\n    })\n    .catch((e) => window.alert(\"Geocoder failed due to: \" + e));\n}\nfunction Geocode(map) {\n    var autocomplete = new google.maps.places.Autocomplete(document.getElementById('autocomplete'));\n    autocomplete.setFields(['place_id', 'name', 'address_components', 'geometry']);\n    autocomplete.addListener('place_changed', function () {\n                const place = autocomplete.getPlace();\n                document.querySelector(\"input[data-fieldname='permanent_address']\").value = document.getElementById('autocomplete').value;\n                console.log(place)\n                const lat = place.geometry.location.lat();\n                document.querySelector(\"input[data-fieldname='lat']\").value =lat;\n                const lng = place.geometry.location.lng()\n                document.querySelector(\"input[data-fieldname='long']\").value = lng;\n                const components = place.address_components;\n                const myLatlng = { lat:lat , lng: lng };\n                const marker = new google.maps.Marker({\n                  position: myLatlng,\n                  map: map,\n                });\n                 map.panTo(myLatlng);\n                 \n            });\n}\n",
 "creation": "2022-05-24 11:14:59.220722",
 "doc_type": "Outgoing Dispatch",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "is_standard": 1,
 "list_columns": [],
 "login_required": 1,
 "max_attachment_size": 0,
 "modified": "2022-09-28 09:35:09.779578",
 "modified_by": "Administrator",
 "module": "Ecta Dispatch",
 "name": "out-going-dispatch",
 "owner": "Administrator",
 "payment_button_label": "Buy Now",
 "published": 1,
 "route": "outgoing-dispatch",
 "show_attachments": 0,
 "show_list": 1,
 "show_sidebar": 0,
 "success_url": "/out-going-dispatch",
 "title": "Out Going Dispatch",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "exporter",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Exporter",
   "max_length": 0,
   "max_value": 0,
   "options": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "exporter_id",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Exporter Id",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "destination",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Destination",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "port",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Port",
   "max_length": 0,
   "max_value": 0,
   "options": "Addis Ababa Airport\nDjibouti Port\nMombasa Port\nPort of Sudan\nBerbera Port",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "section_break_4",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "commodity_type",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Commodity Type",
   "max_length": 0,
   "max_value": 0,
   "options": "Coffee\nTea",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_6",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "processing_type",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Processing Type",
   "max_length": 0,
   "max_value": 0,
   "options": "Washed\nUnwashed\nRoasted\nAnaerobic\nAerobic Honey Carbonic",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_8",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "coffee_grade",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Coffee Grade",
   "max_length": 0,
   "max_value": 0,
   "options": "\n1\n2\n3\n4\n5\n6\n7\n8\n9\nUG\nLocal\nWaste",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "section_break_10",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "package_type",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Package Type",
   "max_length": 0,
   "max_value": 0,
   "options": "\nJute Bag (\u12ac\u123b)\nPoly bags\n20ft Container\n40ft container\nPallet\nCorrugated Boxes\nPlastic Boxes\nBulk",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_12",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "quantity_of_package",
   "fieldtype": "Float",
   "hidden": 0,
   "label": "Quantity of Package",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_14",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "net_weight",
   "fieldtype": "Float",
   "hidden": 0,
   "label": "Net Weight (Kg)",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_16",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "total_weight",
   "fieldtype": "Float",
   "hidden": 0,
   "label": "Total Weight(Kg)",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "crop_year",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Crop year",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "certification_number",
   "fieldtype": "Int",
   "hidden": 0,
   "label": "Certification Number",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "contract_number",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Contract Number",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "unit_price",
   "fieldtype": "Float",
   "hidden": 0,
   "label": "Unit Price",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "driver_name",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Driver Name",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "driver__phone_number",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Driver  Phone Number",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "truck_plate_number",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Truck Plate Number",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "container_number",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Container Number",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "serial_number",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Serial Number",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "section_break_18",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Documents",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "warehouse_outgoing_voucher",
   "fieldtype": "Attach",
   "hidden": 0,
   "label": "Warehouse Outgoing Voucher",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_20",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "other",
   "fieldtype": "Attach",
   "hidden": 0,
   "label": "Other",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_22",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "picture",
   "fieldtype": "Attach Image",
   "hidden": 0,
   "label": "Picture",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldtype": "HTML",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "options": "<div id=\"map\">\n</div>",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "dispatch_approval",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Dispatch Approval",
   "max_length": 0,
   "max_value": 0,
   "options": "\nSeen\nReject",
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  }
 ]
}